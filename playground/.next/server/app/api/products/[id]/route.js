"use strict";(()=>{var e={};e.id=898,e.ids=[898],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8500:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>f,patchFetch:()=>b,requestAsyncStorage:()=>g,routeModule:()=>m,serverHooks:()=>y,staticGenerationAsyncStorage:()=>x});var a={};r.r(a),r.d(a,{DELETE:()=>p,GET:()=>c,PUT:()=>l});var s=r(1444),n=r(9188),o=r(3661),i=r(2812),d=r(3038),u=r(4058);async function c(e,t){try{let{id:e}=t.params;if(!u.mp.safeParse({id:e}).success)return i.NextResponse.json({error:"Invalid product ID format",status:400},{status:400});let r=await d.Up.getById(e);if(!r)return i.NextResponse.json({error:"Product not found",status:404},{status:404});return i.NextResponse.json({data:r,status:200},{status:200})}catch(e){return console.error("Error fetching product:",e),i.NextResponse.json({error:"Internal server error",status:500},{status:500})}}async function l(e,t){try{let{id:r}=t.params,a=await e.json();if(!u.mp.safeParse({id:r}).success)return i.NextResponse.json({error:"Invalid product ID format",status:400},{status:400});let s=u.LG.safeParse(a);if(!s.success)return i.NextResponse.json({error:"Invalid request data",message:s.error.message,status:400},{status:400});if(a.categoryId&&!await d.WN.getById(a.categoryId))return i.NextResponse.json({error:"Category not found",status:400},{status:400});let n=await d.Up.update(r,s.data);if(!n)return i.NextResponse.json({error:"Product not found",status:404},{status:404});return i.NextResponse.json({data:n,message:"Product updated successfully",status:200},{status:200})}catch(e){return console.error("Error updating product:",e),i.NextResponse.json({error:"Internal server error",status:500},{status:500})}}async function p(e,t){try{let{id:e}=t.params;if(!u.mp.safeParse({id:e}).success)return i.NextResponse.json({error:"Invalid product ID format",status:400},{status:400});if(!await d.Up.delete(e))return i.NextResponse.json({error:"Product not found",status:404},{status:404});return i.NextResponse.json({message:"Product deleted successfully",status:200},{status:200})}catch(e){return console.error("Error deleting product:",e),i.NextResponse.json({error:"Internal server error",status:500},{status:500})}}let m=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/products/[id]/route",pathname:"/api/products/[id]",filename:"route",bundlePath:"app/api/products/[id]/route"},resolvedPagePath:"E:\\github\\my\\next-mcp-server\\playground\\app\\api\\products\\[id]\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:g,staticGenerationAsyncStorage:x,serverHooks:y}=m,f="/api/products/[id]/route";function b(){return(0,o.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:x})}},3038:(e,t,r)=>{r.d(t,{Up:()=>d,WN:()=>u,ut:()=>i});let a=[{id:"550e8400-e29b-41d4-a716-446655440000",name:"Admin User",email:"admin@example.com",role:"admin",createdAt:new Date("2023-01-01"),updatedAt:new Date("2023-01-01")},{id:"550e8400-e29b-41d4-a716-446655440001",name:"Test User",email:"user@example.com",role:"user",createdAt:new Date("2023-01-02"),updatedAt:new Date("2023-01-02")}],s=[{id:"550e8400-e29b-41d4-a716-446655440002",name:"Electronics",description:"Electronic devices and accessories"},{id:"550e8400-e29b-41d4-a716-446655440003",name:"Books",description:"Books and publications"}],n=[{id:"550e8400-e29b-41d4-a716-446655440004",name:"Laptop",description:"High-performance laptop",price:1299.99,stock:10,categoryId:"550e8400-e29b-41d4-a716-446655440002",createdAt:new Date("2023-01-03"),updatedAt:new Date("2023-01-03")},{id:"550e8400-e29b-41d4-a716-446655440005",name:"Programming Book",description:"Learn programming with this book",price:29.99,stock:50,categoryId:"550e8400-e29b-41d4-a716-446655440003",createdAt:new Date("2023-01-04"),updatedAt:new Date("2023-01-04")}],o=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),i={getAll:async(e=1,t=10)=>{let r=(e-1)*t;return{users:a.slice(r,r+t),total:a.length}},getById:async e=>a.find(t=>t.id===e)||null,create:async e=>{let t={id:o(),...e,role:e.role||"user",createdAt:new Date,updatedAt:new Date};return a.push(t),t},update:async(e,t)=>{let r=a.findIndex(t=>t.id===e);if(-1===r)return null;let s={...a[r],...t,updatedAt:new Date};return a[r]=s,s},delete:async e=>{let t=a.findIndex(t=>t.id===e);return -1!==t&&(a.splice(t,1),!0)},authenticate:async e=>a.find(t=>t.email===e.email)||null},d={getAll:async(e=1,t=10)=>{let r=(e-1)*t;return{products:n.slice(r,r+t),total:n.length}},getById:async e=>n.find(t=>t.id===e)||null,create:async e=>{let t={id:o(),...e,createdAt:new Date,updatedAt:new Date};return n.push(t),t},update:async(e,t)=>{let r=n.findIndex(t=>t.id===e);if(-1===r)return null;let a={...n[r],...t,updatedAt:new Date};return n[r]=a,a},delete:async e=>{let t=n.findIndex(t=>t.id===e);return -1!==t&&(n.splice(t,1),!0)},getByCategoryId:async e=>n.filter(t=>t.categoryId===e)},u={getAll:async()=>s,getById:async e=>s.find(t=>t.id===e)||null,create:async e=>{let t={id:o(),...e};return s.push(t),t}}},4058:(e,t,r)=>{r.d(t,{H9:()=>o,LG:()=>d,hq:()=>i,i2:()=>s,kC:()=>l,mp:()=>u,o$:()=>c,yd:()=>n});var a=r(1364);let s=a.z.object({name:a.z.string().min(2,"Name must be at least 2 characters"),email:a.z.string().email("Invalid email address"),password:a.z.string().min(8,"Password must be at least 8 characters"),role:a.z.enum(["admin","user","guest"]).optional()}),n=a.z.object({name:a.z.string().min(2,"Name must be at least 2 characters").optional(),email:a.z.string().email("Invalid email address").optional(),role:a.z.enum(["admin","user","guest"]).optional()}),o=a.z.object({id:a.z.string().uuid("Invalid user ID format")}),i=a.z.object({name:a.z.string().min(1,"Product name is required"),description:a.z.string().optional(),price:a.z.number().positive("Price must be a positive number"),stock:a.z.number().nonnegative("Stock cannot be negative"),categoryId:a.z.string().uuid("Invalid category ID format")}),d=a.z.object({name:a.z.string().min(1,"Product name is required").optional(),description:a.z.string().optional(),price:a.z.number().positive("Price must be a positive number").optional(),stock:a.z.number().nonnegative("Stock cannot be negative").optional(),categoryId:a.z.string().uuid("Invalid category ID format").optional()}),u=a.z.object({id:a.z.string().uuid("Invalid product ID format")}),c=a.z.object({name:a.z.string().min(1,"Category name is required"),description:a.z.string().optional()});a.z.object({email:a.z.string().email("Invalid email address"),password:a.z.string().min(8,"Password must be at least 8 characters")}).extend({name:a.z.string().min(2,"Name must be at least 2 characters")}),a.z.object({id:a.z.string(),type:a.z.enum(["payment_intent.succeeded","payment_intent.failed","customer.subscription.created"]),data:a.z.object({object:a.z.object({id:a.z.string(),amount:a.z.number().optional(),status:a.z.string().optional(),customer:a.z.string().optional()})})});let l=a.z.object({page:a.z.coerce.number().int().positive().default(1),limit:a.z.coerce.number().int().positive().default(10)})}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[732,605],()=>r(8500));module.exports=a})();